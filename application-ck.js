function stash(e){e.x0=e.x;e.dx0=e.dx}function arcTween(e){var t=d3.interpolate({x:e.x0,dx:e.dx0},e);return function(n){var r=t(n);e.x0=r.x;e.dx0=r.dx;return arc(r)}}var width=960,height=700,radius=Math.min(width,height)/2,color=d3.scale.category20c(),svg=d3.select("#graph").append("svg").attr("width",width).attr("height",height).append("g").attr("transform","translate("+width/2+","+height*.52+")"),partition=d3.layout.partition().sort(null).size([2*Math.PI,radius*radius]).value(function(e){return 1}),arc=d3.svg.arc().startAngle(function(e){return e.x}).endAngle(function(e){return e.x+e.dx}).innerRadius(function(e){return Math.sqrt(e.y)}).outerRadius(function(e){return Math.sqrt(e.y+e.dy)});d3.json("data.json",function(e,t){var n=svg.datum(t).selectAll("path").data(partition.nodes).enter().append("path").attr("display",function(e){return e.depth?null:"none"}).attr("d",arc).style("stroke","#fff").style("fill",function(e){return color((e.children?e:e.parent).name)}).style("fill-rule","evenodd").each(stash);d3.selectAll("input").on("change",function(){var t=this.value==="count"?function(){return 1}:function(e){return e.size};n.data(partition.value(t).nodes).transition().duration(1500).attrTween("d",arcTween)})});d3.select(self.frameElement).style("height",height+"px");